@model Dialogue.Logic.Models.ViewModels.BreadCrumbViewModel

@if (Model.Categories.Any())
{
    <ul class="breadcrumb">
        @{
    var catCount = Model.Categories.Count;
    if (catCount <= 1)
    {
        if (Model.Topic != null)
        {
            <li><a href="@Model.Categories[0].Url">@Model.Categories[0].Name</a></li>
            <li class="active">@Model.Topic.Name</li>
        }
        else
        {
            <li><a href="@Model.Categories[0].Url">@Model.Categories[0].Name</a></li>
            <li class="active">@Model.Category.Name</li>
        }
    }
    else
    {
        var i = 1;
        foreach (var cat in Model.Categories)
        {
            if (i != catCount)
            {
                <li><a href="@cat.Url">@cat.Name</a></li>
            }
            else
            {
                if (Model.Topic != null)
                {
                    <li><a href="@cat.Url">@cat.Name</a></li>
                    <li class="active">@Model.Topic.Name</li>
                }
                else
                {
                    <li><a href="@cat.Url">@cat.Name</a></li>
                    <li class="active">@Model.Category.Name</li>
                }
            }
            i++;
        }
    }
        }
    </ul>
}